<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Tuning on the JPC-12 - EA1HET</title><meta name="description" content="DescriptionThe JPC-12 (also known as PAC-12) is a portable HF vertical antenna that features a very handy set of parts that assemble quickly and that is able to cover, officially, 40m through 6m, but, unofficially, 60 and 80m as well. It handles up to 100 watts.This antenna has been in production for several years now. The new version of the antenna, put into the market in October 2020 included an improved version of the main tuning coil. This new version of the tuning coil has been marked with the right number of turns for the 20m and 40m bands, making it easier and faster to set up, even without an antenna analyser."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://ea1het.com/tuning-on-the-jpc-12.html"><link rel="alternate" type="application/atom+xml" href="https://ea1het.com/feed.xml"><link rel="alternate" type="application/json" href="https://ea1het.com/feed.json"><meta property="og:title" content="Tuning on the JPC-12"><meta property="og:site_name" content="EA1HET"><meta property="og:description" content="DescriptionThe JPC-12 (also known as PAC-12) is a portable HF vertical antenna that features a very handy set of parts that assemble quickly and that is able to cover, officially, 40m through 6m, but, unofficially, 60 and 80m as well. It handles up to 100 watts.This antenna has been in production for several years now. The new version of the antenna, put into the market in October 2020 included an improved version of the main tuning coil. This new version of the tuning coil has been marked with the right number of turns for the 20m and 40m bands, making it easier and faster to set up, even without an antenna analyser."><meta property="og:url" content="https://ea1het.com/tuning-on-the-jpc-12.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://ea1het.com/assets/css/style.css?v=d3acd2c08fe6f53e6ff9e9111d8c2740"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://ea1het.com/tuning-on-the-jpc-12.html"},"headline":"Tuning on the JPC-12","datePublished":"2024-09-22T16:23","dateModified":"2024-09-22T16:23","description":"DescriptionThe JPC-12 (also known as PAC-12) is a portable HF vertical antenna that features a very handy set of parts that assemble quickly and that is able to cover, officially, 40m through 6m, but, unofficially, 60 and 80m as well. It handles up to 100 watts.This antenna has been in production for several years now. The new version of the antenna, put into the market in October 2020 included an improved version of the main tuning coil. This new version of the tuning coil has been marked with the right number of turns for the 20m and 40m bands, making it easier and faster to set up, even without an antenna analyser.","author":{"@type":"Person","name":"Jonathan Gonzalez","url":"https://ea1het.com/authors/jonathan-gonzalez/"},"publisher":{"@type":"Organization","name":"Jonathan Gonzalez"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><div class="container"><header class="top" id="js-top"><div><a class="logo" href="https://ea1het.com/">EA1HET</a><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false" height="15px" width="15px"><use xlink:href="https://ea1het.com/assets/svg/svg-map.svg#search"/></svg></button></div></div></header><main class="post"><article class="content wrapper"><div class="hero hero--full"><header class="hero__header"><h1>Tuning on the JPC-12</h1><address>by <a href="https://ea1het.com/authors/jonathan-gonzalez/" rel="author">Jonathan Gonzalez</a></address>published on <time datetime="2024-09-22T16:23">September 22, 2024</time></header></div><div class="content__entry"><h1>Description</h1><p>The JPC-12 (also known as PAC-12) is a portable HF vertical antenna that features a very handy set of parts that assemble quickly and that is able to cover, officially, 40m through 6m, but, unofficially, 60 and 80m as well. It handles up to 100 watts.</p><p>This antenna has been in production for several years now. The new version of the antenna, put into the market in October 2020 included an improved version of the main tuning coil. This new version of the tuning coil has been marked with the right number of turns for the 20m and 40m bands, making it easier and faster to set up, even without an antenna analyser.</p><figure class="post__image"><img loading="lazy" src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-16.00.44.png" alt="" width="948" height="1271" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.00.44-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.00.44-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.00.44-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.00.44-lg.png 1024w"></figure><figure class="post__image"><img src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-16.01.23.png" alt="" width="348" height="436" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.01.23-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.01.23-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.01.23-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.01.23-lg.png 1024w"></figure>.   <figure class="post__image"><img loading="lazy" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-16.02.12.png" alt="" width="329" height="438" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.02.12-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.02.12-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.02.12-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.02.12-lg.png 1024w"></figure><p><em>Figures 1, 2 and 3: Installation detail of the JPC-12 / PAC-12 antenna on the field. In red, Paracord ropes acting as guy ropes. On the field, and barely perceptible, counterpoise lines (8x) evenly distributed around the antenna. Detail on the counterpoise used in order to improve overall antenna performance. Detail on one of the setups for 10m band.</em></p><p class="msg msg--info"><span class="notion-enable-hover" data-token-index="0">If an additional coil without preselector slider (can be acquired separately or customised) is added to the installation, with the two coils superimposed together, and adding an equivalent counterpose to a 20 meter ground mesh, the JPC-12 antenna can work in the 80m band as well.</span></p><p><em></em></p><h1>Technical components</h1><h3>Standard parts</h3><ul><li>1 x Coil with tuning pre-selection for 20m and 40m bands.</li><li>1 x Extendable aluminum rod of 0,328m folded and 2,545m when fully extended.</li><li>4 x Fixed length aluminum alloy mast sections, 0,323m each.</li><li>1 x Wire trap (hidden coil) with the main UHF (SO-239) connector.</li><li>1 x Ground anchor spike.</li></ul><p></p><figure class="post__image"><img loading="lazy" src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-15.58.15.png" alt="" width="1251" height="743" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-15.58.15-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-15.58.15-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-15.58.15-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-15.58.15-lg.png 1024w"></figure><p><em>Figure 4: Standard parts of the JPC-12 antenna</em></p><h3>Extra parts added by myself</h3><ul><li><p>8 x Counterpoise cables made of 5m of wire with 0,75 mm2 section each.</p><figure class="post__image"><img loading="lazy" src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-16.07.12.png" alt="" width="678" height="322" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.07.12-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.07.12-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.07.12-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.07.12-lg.png 1024w"></figure><p><em>Figure 5: Detail on the formerly used counterpoise cabling. Now using the plate in Figure 6</em>.</p></li><li><p>1 x Aluminum alloy ground plate for counterpoise cabling connection. This is an improved version of the interconnection shown in Figure 5, above.</p><figure class="post__image"><img loading="lazy" src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-16.08.43.png" alt="" width="675" height="475" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.08.43-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.08.43-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.08.43-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.08.43-lg.png 1024w"></figure><p><em>Figure 6: Detail on the aluminum alloy ground plate used to interconnect all the counterpoise cables</em></p></li><li><p>1 x Coil for 40m band. This coil can be used alone for the aforementioned band or it can also be used in combination with the standard pre-selectable coil and an elongated extendable aluminum rod to reach 60m and 80m bands.</p><figure class="post__image"><img loading="lazy" src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-16.09.07.png" alt="" width="674" height="513" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.09.07-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.09.07-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.09.07-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.09.07-lg.png 1024w"></figure><p><em>Figure 7: Coil for 40m band.</em></p></li></ul><p> </p><h1>Operational setup</h1><table id="fff3eee4-f6b9-81a0-be95-dc9182f03208" class="simple-table" style="width: 110.114%;"><thead class="simple-table-header"><tr id="fff3eee4-f6b9-8169-950d-cd0aa2ee268b"><th id="vP;E" class="simple-table-header-color simple-table-header" style="width: 10.7905%;">Band</th><th id="Ch?n" class="simple-table-header-color simple-table-header" style="width: 16.0602%;">Tuning frequency</th><th id="gM&#96;M" class="simple-table-header-color simple-table-header" style="width: 12.6725%;">VSWR on Icom IC-705</th><th id="BoIw" class="simple-table-header-color simple-table-header" style="width: 10.4141%;">Coil in use?</th><th id="}VEV" class="simple-table-header-color simple-table-header" style="width: 17.6913%;">Theoretical length for 1/4 <strong>λ</strong></th><th id="zJ[A" class="simple-table-header-color simple-table-header" style="width: 17.8168%;">Extendable rod length</th><th id="n|KE" class="simple-table-header-color simple-table-header" style="width: 14.4291%;"># of fixed length sections</th></tr></thead><tbody><tr id="fff3eee4-f6b9-8140-adc3-d50e79aab2ae"><td id="vP;E" style="width: 10.7905%;">80m</td><td id="Ch?n" style="width: 16.0602%;">3.55 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">-</td><td id="BoIw" style="width: 10.4141%;">Yes</td><td id="}VEV" style="width: 17.6913%;">See note 1️⃣ below</td><td id="zJ[A" style="width: 17.8168%;">-</td><td id="n|KE" style="width: 14.4291%;">-</td></tr><tr id="fff3eee4-f6b9-81d2-bb8d-da52a60b74b1"><td id="vP;E" style="width: 10.7905%;">60m</td><td id="Ch?n" style="width: 16.0602%;">5.35 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">-</td><td id="BoIw" style="width: 10.4141%;">Yes</td><td id="}VEV" style="width: 17.6913%;">See note 2️⃣ below</td><td id="zJ[A" style="width: 17.8168%;">-</td><td id="n|KE" style="width: 14.4291%;">-</td></tr><tr id="fff3eee4-f6b9-81b3-9d65-dd95bbb19bf1"><td id="vP;E" style="width: 10.7905%;">40m</td><td id="Ch?n" style="width: 16.0602%;">7.1 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">1 : 1.4</td><td id="BoIw" style="width: 10.4141%;">Yes</td><td id="}VEV" style="width: 17.6913%;">Coil in 40 MHz position (silver)</td><td id="zJ[A" style="width: 17.8168%;">2,4m</td><td id="n|KE" style="width: 14.4291%;">4 or 1,3m</td></tr><tr id="fff3eee4-f6b9-81d8-af44-ed3d252ab8e0"><td id="vP;E" style="width: 10.7905%;">30m</td><td id="Ch?n" style="width: 16.0602%;">10.125 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">1 : 1.5</td><td id="BoIw" style="width: 10.4141%;">Yes</td><td id="}VEV" style="width: 17.6913%;">See note 3️⃣ below</td><td id="zJ[A" style="width: 17.8168%;">2,202m</td><td id="n|KE" style="width: 14.4291%;">4 or 1,3m</td></tr><tr id="fff3eee4-f6b9-8145-a0a3-f4415086324d"><td id="vP;E" style="width: 10.7905%;">20m</td><td id="Ch?n" style="width: 16.0602%;">14.2 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">1 : 1.0</td><td id="BoIw" style="width: 10.4141%;">Yes</td><td id="}VEV" style="width: 17.6913%;">Coil in 20 MHz position (gold)</td><td id="zJ[A" style="width: 17.8168%;">2,332m</td><td id="n|KE" style="width: 14.4291%;">4 or 1,3m</td></tr><tr id="fff3eee4-f6b9-8180-97e1-e7c83325ad45"><td id="vP;E" style="width: 10.7905%;">17m</td><td id="Ch?n" style="width: 16.0602%;">18.12 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">1 : 1.2</td><td id="BoIw" style="width: 10.4141%;">No</td><td id="}VEV" style="width: 17.6913%;">4,25m</td><td id="zJ[A" style="width: 17.8168%;">2,361m</td><td id="n|KE" style="width: 14.4291%;">4 or 1,3m</td></tr><tr id="fff3eee4-f6b9-818b-8ee3-dad97c6afa20"><td id="vP;E" style="width: 10.7905%;">15m</td><td id="Ch?n" style="width: 16.0602%;">21.3 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">1 : 1.3</td><td id="BoIw" style="width: 10.4141%;">No</td><td id="}VEV" style="width: 17.6913%;">3,75m</td><td id="zJ[A" style="width: 17.8168%;">1,81m</td><td id="n|KE" style="width: 14.4291%;">4 or 1,3m</td></tr><tr id="fff3eee4-f6b9-81e2-8f34-e200f4ea4b24"><td id="vP;E" style="width: 10.7905%;">12m</td><td id="Ch?n" style="width: 16.0602%;">24.9 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">1 : 1.4</td><td id="BoIw" style="width: 10.4141%;">No</td><td id="}VEV" style="width: 17.6913%;">3m</td><td id="zJ[A" style="width: 17.8168%;">1,57m</td><td id="n|KE" style="width: 14.4291%;">4 or 1,3m</td></tr><tr id="fff3eee4-f6b9-81e6-b01c-c9a6e406dc42"><td id="vP;E" style="width: 10.7905%;">10m</td><td id="Ch?n" style="width: 16.0602%;">28.4 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">1 : 1.3</td><td id="BoIw" style="width: 10.4141%;">Yes</td><td id="}VEV" style="width: 17.6913%;">See note 4️⃣ below</td><td id="zJ[A" style="width: 17.8168%;">2,25m</td><td id="n|KE" style="width: 14.4291%;">None</td></tr><tr id="fff3eee4-f6b9-814e-816a-cf8caed21c6f"><td id="vP;E" style="width: 10.7905%;">10m</td><td id="Ch?n" style="width: 16.0602%;">28.4 MHz</td><td id="gM&#96;M" style="width: 12.6725%;">1 : 1.4</td><td id="BoIw" style="width: 10.4141%;">No</td><td id="}VEV" style="width: 17.6913%;">2,5m</td><td id="zJ[A" style="width: 17.8168%;">1,271m</td><td id="n|KE" style="width: 14.4291%;">4 or 1,3m</td></tr></tbody></table><p> </p><blockquote><p>*<strong>NOTE<br></strong></p><p>Above table of values show data gathered in my specific environmental conditions. Use as mere reference only. For best performance, tune your antenna system on-site before operating. When tuning, always use low power.</p><p>In regard to measures, please note the extendable rod has been measured including the threaded part of the rod, as it’s indicated in the Figure 6, below.</p><p>In regard to measures related to the black coated fixed length aluminum parts, measures were taken without the threaded part of the rod and all of the elements measure the same.*</p></blockquote><figure class="post__image"><img loading="lazy" src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-16.11.41.png" alt="" width="706" height="139" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.11.41-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.11.41-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.11.41-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.11.41-lg.png 1024w"></figure><p><em>Figure 8: Detail on how measures were taken on the aluminum extendable rod</em></p><p class="msg msg--highlight">[1]—&gt; Tuning on 80m (last update: Apr 23, 2023; back for further details)<br><br>This antenna is originally not meant to be used on 80m, but, using two coils together (the standard preselectable coil plus another fixed coil designed for 40m) in combination with a long extendable rod can do the trick and make a match.*</p><p class="msg msg--highlight">[2]—&gt; Tuning on 60m (last update: Apr 23, 2023; back for further details)<br><br>This antenna is originally not meant to be used on 60m.<br><br>I’m yet researching how to approach this band segment. Most probably I will be using a second fixed coil, designed for 40m, and I will be setting up the preselectable band on the antenna’s standard coil close to 20m mark. With this setup I’ll be trying to get closer to 60m band so finally I can play with the extendable aluminum rod seeking for a match.*</p><p class="msg msg--highlight">[3]—&gt; Tuning on 30m<br><br>In order to tune the JPC-12 for 30m band (10.100 MHz - 10.150 MHz) it’s necessary to place the tuning knob <strong>9 turns below the red &amp; gold mark,</strong> that corresponds to 20m band, and use the number of fixed length section with aluminum rod extended to the length detailed in the “Operational Setup” table above.*</p><figure class="post__image"><img loading="lazy" src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-16.12.49.png" alt="" width="705" height="446" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.12.49-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.12.49-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.12.49-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.12.49-lg.png 1024w"></figure><p><em>Figure 9: Tuning position obtained for 30m. The preselector slider should be placed at the 9th turn counting to the bottom from red and gold mark in the coil.</em></p><p class="msg msg--highlight"><span class="notion-enable-hover" data-token-index="0">[4]—&gt; Tuning on 10m with antenna coil<br><br></span><span class="notion-enable-hover" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-token-index="0">The 10m band can be tuned in two different ways, with or without using the antenna coil. It might sound bizarre using the 20 MHz / 40 MHz coil to tune for 10m band but the truth is that both ways are acceptable approaches as NanoVNA measures showed. See below the Smith Charts for more details. While tuning with the coil, place the tuning knob </span><span class="notion-enable-hover" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-token-index="1">6 turns above the red &amp; gold mark</span><span class="notion-enable-hover" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-token-index="2">, </span><span class="notion-enable-hover" style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);" data-token-index="3">that corresponds to 20m band, and use the number of fixed length section with aluminum rod extended to the length detailed in the “Operational Setup” table above</span> </p><figure class="post__image"><img loading="lazy" src="https://ea1het.com/media/posts/4/Screenshot-2024-09-22-at-16.13.53.png" alt="" width="705" height="468" sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.13.53-xs.png 300w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.13.53-sm.png 480w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.13.53-md.png 768w, https://ea1het.com/media/posts/4/responsive/Screenshot-2024-09-22-at-16.13.53-lg.png 1024w"></figure><p><em>Figure 10: Tuning position obtained for 10m. The preselector slider should be placed at the 6th turn counting to the top from red and gold mark in the coil. In this case, the turn to be used it’s the top one.</em></p><h1>NanoVNA-H readings (SWR &amp; Smith Chart)</h1><ul><li><p>NanoVNA firmware / hardware details:</p><ul><li>Version: 1.2.14 [p:101, IF:12k, ADC:192k, LCD:320x240]</li><li>Build time: Aug 31, 2022 - 13:23:46</li><li>Architecture: ARMv6 - Core Variant: Cortex-M0</li><li>Platform: STM32F072xB</li><li>TCX0 = 26.000 000 MHz</li></ul><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/22fb53b6-9ab4-4501-967b-89bbdb536899/nanovna.jpg" alt="Figure 11: NanoVNA-H device detail. " data-is-external-image="true"></p><p>Figure 11: NanoVNA-H device detail.</p></li><li><p>Location where measurements were made</p><ul><li>GPS coordinates: 43.5699232,-5.7025287 [<a href="https://www.google.com/maps/place/43%C2%B034'11.7%22N+5%C2%B042'09.1%22W/@43.5699232,-5.7051036,2102m/data=!3m1!1e3!4m4!3m3!8m2!3d43.5699232!4d-5.7025287">Google</a>][<a href="https://maps.apple.com/?address=Campa%20Torres%20Archaeological-Nature%20Park,%20Carretera%20de%20la%20Campa%20de%20Torres,%203834,%2033212,%20Asturias,%20Spain&amp;ll=43.569923,-5.702529&amp;q=Campa%20Torres%20Archaeological-Nature%20Park">Apple</a>][<a href="https://www.openstreetmap.org/search?query=43.5699232%2C-5.7025287#map=18/43.5699232/-5.7025287">OpenStreet</a>]</li><li>Grid Locator: <a href="https://www.karhukoti.com/Maidenhead-Grid-Square-Locator/?grid=IN73dn">IN73dn</a> / <a href="https://www.karhukoti.com/Maidenhead-Grid-Square-Locator/?grid=IN73dn56">IN73dn56</a> or <a href="https://www.karhukoti.com/Maidenhead-Grid-Square-Locator/?grid=IN73dn56">IN73dn 56qs</a></li></ul></li><li><p>Calibration:</p><ul><li>Process:<ul><li>Single calibration per measurement / per band.</li><li>Start / End frequencies set before calibration per each measured band.</li></ul></li><li>Materials used in calibration:<ul><li>Cable used:<ul><li>Brand / Model: Messi &amp; Paoloni <a href="https://messi.it/en/catalogue/50-ohm-cables-ham-radio/hyperflex-5.htm">Hyperflex 5</a></li><li>Length: 6m.</li></ul></li><li>Connectors used:<ul><li>Brand / Model: <a href="https://messi.it/en/catalogue/50-ohm-rf-coaxial-cable.htm">Messi &amp; Paoloni</a>.</li><li>Socket type(s): SMA, BNC and UHF (SO-239) upon demand.</li></ul></li></ul></li></ul></li></ul><h3>Ham Radio band: 80m</h3><p>(Screenshot pending to be added here)</p><h3>Ham Radio band: 60m</h3><p>(Screenshot pending to be added here)</p><h3>Ham Radio band: 40m</h3><p>See the “Operational Setup” table above for more details.</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5c5ca015-a27c-44c0-97f5-de6f50564160/40m_-_56A28017.png" alt="Figure 12: 40m band, tuning on 7.100 MHz" data-is-external-image="true"></p><p>Figure 12: 40m band, tuning on 7.100 MHz</p><h3>Ham Radio band: 30m</h3><p>See the “Operational Setup” table above for more details.</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/aba6b743-456b-4312-92d0-2cc8b127c5c8/30m_-_56A280B3.png" alt="Figure 13: 30m band, tuning on 10.125 MHz" data-is-external-image="true"></p><p>Figure 13: 30m band, tuning on 10.125 MHz</p><h3>Ham Radio band: 20m</h3><p>See the “Operational Setup” table above for more details.</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2469d5b1-da70-479d-86c2-854394ce525f/20m_-_56A27EE0.png" alt="Figure 14: 20m band, tuning on 14.200 MHz" data-is-external-image="true"></p><p>Figure 14: 20m band, tuning on 14.200 MHz</p><h3>Ham Radio band: 17m</h3><p>See the “Operational Setup” table above for more details.</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/af70f528-6364-4392-9555-8f446a17244a/17m_-_56A27E55.png" alt="Figure 15: 17m band, tuning on 18.120 MHz" data-is-external-image="true"></p><p>Figure 15: 17m band, tuning on 18.120 MHz</p><h3>Ham Radio band: 15m</h3><p>See the “Operational Setup” table above for more details.</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/29782a32-b9a1-4882-8615-4e9e5668e768/15m_-_56A27E01.png" alt="Figure 16: 15m band, tuning on 21.300 MHz" data-is-external-image="true"></p><p>Figure 16: 15m band, tuning on 21.300 MHz</p><h3>Ham Radio band: 12m</h3><p>See the “Operational Setup” table above for more details.</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/71822f20-0637-4fc1-ac27-a9809cf90756/12m_-_56A27CE8.png" alt="Figure 17: 12m band, tuning on 24.900 MHz" data-is-external-image="true"></p><p>Figure 17: 12m band, tuning on 24.900 MHz</p><h3>Ham Radio band: 10m</h3><p>NOTE: Tuned with coil above the 20 MHz gold mark.</p><p>See the “Operational Setup” table above for more details.</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e77d26eb-f90c-4fe1-86dc-0c5a0d5968ed/10m_with_coil_-_56A27AF7.png" alt="Figure 18: 10m band, tuning on 28.400 MHz using the antenna coil displaced to adapt to this band. " data-is-external-image="true"></p><p>Figure 18: 10m band, tuning on 28.400 MHz using the antenna coil displaced to adapt to this band.</p><h3>Ham Radio band: 10m</h3><p>NOTE: Tuned without antenna coil.</p><p>See the “Operational Setup” table above for more details.</p><p><img loading="lazy" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8c57cccc-ce68-489e-9ebc-84901471a2db/10m_no_coil_-_56A282FB.png" alt="Figure 19: 10m band, tuning on 28.400 MHz without using the antenna coil, thus, removing all aluminum mast sections." data-is-external-image="true"></p><p>Figure 19: 10m band, tuning on 28.400 MHz without using the antenna coil, thus, removing all aluminum mast sections.</p><p></p><p> </p><p> </p><p> </p><p></p><p></p><p></p></div><aside><p class="content__last-updated">This article was updated on September 22, 2024</p><div class="content__share"></div></aside><footer><div class="content__bio"><h3><a href="https://ea1het.com/authors/jonathan-gonzalez/" class="inverse" title="Jonathan Gonzalez">Jonathan Gonzalez</a></h3></div><nav class="content__nav"><div class="content__nav__prev">Previous Post<h3 class="h5"><a href="https://ea1het.com/smith-charts-and-their-interpretation.html" class="inverse" rel="prev">Smith charts and their interpretation</a></h3></div></nav></footer></article></main></div><footer class="footer"><div class="footer__wrapper"><div class="footer__copyright"><p>Powered by Publii</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://ea1het.com/assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://ea1het.com/assets/js/scripts.min.js?v=e2bc0e7d7ff60ea78ee920470cf8c8a1"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality.</div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies.</div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Required</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && cbConfig.initialLsState.indexOf(allowedGroup) === -1) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>